import React from "react";
import { toast } from "react-hot-toast";

import { Typography } from "../../..";

type TPositions =
  | "top-left"
  | "top-center"
  | "top-right"
  | "bottom-left"
  | "bottom-center"
  | "bottom-right";

type TNotificationProps = {
  content: React.ReactNode;
  status: "success" | "info" | "loading" | "error" | "warning";
  duration?: number;
  icon?: string;
  position?: TPositions;
};

type NotificationOptions = {
  duration?: number;
  icon?: string;
  position?: TPositions;
};

const ENUM_STATUSES = {
  success: (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="14"
      height="15"
      viewBox="0 0 14 15"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M13.6666 7.50004C13.6666 11.182 10.682 14.1667 6.99998 14.1667C3.31798 14.1667 0.333313 11.182 0.333313 7.50004C0.333313 3.81804 3.31798 0.833374 6.99998 0.833374C10.682 0.833374 13.6666 3.81804 13.6666 7.50004ZM9.68665 5.48004C9.78028 5.57379 9.83287 5.70087 9.83287 5.83337C9.83287 5.96587 9.78028 6.09296 9.68665 6.18671L6.35331 9.52004C6.25956 9.61367 6.13248 9.66627 5.99998 9.66627C5.86748 9.66627 5.7404 9.61367 5.64665 9.52004L4.31331 8.18671C4.26419 8.14093 4.22479 8.08573 4.19746 8.0244C4.17013 7.96307 4.15544 7.89686 4.15425 7.82972C4.15307 7.76259 4.16542 7.6959 4.19056 7.63364C4.21571 7.57138 4.25314 7.51483 4.30062 7.46735C4.3481 7.41987 4.40466 7.38244 4.46691 7.35729C4.52917 7.33214 4.59586 7.31979 4.66299 7.32098C4.73013 7.32216 4.79634 7.33686 4.85767 7.36419C4.919 7.39151 4.9742 7.43092 5.01998 7.48004L5.99998 8.46004L7.48998 6.96937L8.97998 5.48004C9.07373 5.38641 9.20081 5.33381 9.33331 5.33381C9.46581 5.33381 9.5929 5.38641 9.68665 5.48004Z"
        fill="white"
      />
    </svg>
  ),
  loading: (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="12"
      height="15"
      viewBox="0 0 12 15"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0 6.44471C0 4.31271 1.98682e-08 3.24671 0.252 2.88804C0.503333 2.53004 1.50533 2.18671 3.51 1.50071L3.892 1.37004C4.93667 1.01204 5.45867 0.833374 6 0.833374C6.54067 0.833374 7.06333 1.01204 8.108 1.37004L8.49 1.50071C10.4947 2.18671 11.4967 2.53004 11.748 2.88804C12 3.24671 12 4.31337 12 6.44471V7.49404C12 11.2527 9.174 13.0774 7.40067 13.8514C6.92 14.0614 6.68 14.1667 6 14.1667C5.32 14.1667 5.08 14.0614 4.59933 13.8514C2.826 13.0767 0 11.2534 0 7.49404V6.44471ZM6 4.33337C6.13261 4.33337 6.25979 4.38605 6.35355 4.47982C6.44732 4.57359 6.5 4.70077 6.5 4.83337V7.50004C6.5 7.63265 6.44732 7.75983 6.35355 7.85359C6.25979 7.94736 6.13261 8.00004 6 8.00004C5.86739 8.00004 5.74022 7.94736 5.64645 7.85359C5.55268 7.75983 5.5 7.63265 5.5 7.50004V4.83337C5.5 4.70077 5.55268 4.57359 5.64645 4.47982C5.74022 4.38605 5.86739 4.33337 6 4.33337ZM6 10.1667C6.17681 10.1667 6.34638 10.0965 6.4714 9.97144C6.59643 9.84642 6.66667 9.67685 6.66667 9.50004C6.66667 9.32323 6.59643 9.15366 6.4714 9.02864C6.34638 8.90361 6.17681 8.83337 6 8.83337C5.82319 8.83337 5.65362 8.90361 5.5286 9.02864C5.40357 9.15366 5.33333 9.32323 5.33333 9.50004C5.33333 9.67685 5.40357 9.84642 5.5286 9.97144C5.65362 10.0965 5.82319 10.1667 6 10.1667Z"
        fill="white"
      />
    </svg>
  ),
  error: (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="14"
      height="15"
      viewBox="0 0 14 15"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M13.6666 7.50004C13.6666 11.182 10.682 14.1667 6.99998 14.1667C3.31798 14.1667 0.333313 11.182 0.333313 7.50004C0.333313 3.81804 3.31798 0.833374 6.99998 0.833374C10.682 0.833374 13.6666 3.81804 13.6666 7.50004ZM4.97998 5.48004C5.07373 5.38641 5.20081 5.33381 5.33331 5.33381C5.46581 5.33381 5.5929 5.38641 5.68665 5.48004L6.99998 6.79337L8.31331 5.48004C8.4081 5.39172 8.53346 5.34364 8.66299 5.34592C8.79253 5.34821 8.91612 5.40068 9.00773 5.49229C9.09934 5.5839 9.15181 5.70749 9.1541 5.83703C9.15638 5.96656 9.1083 6.09192 9.01998 6.18671L7.70665 7.50004L9.01998 8.81337C9.1083 8.90816 9.15638 9.03352 9.1541 9.16305C9.15181 9.29259 9.09934 9.41618 9.00773 9.50779C8.91612 9.5994 8.79253 9.65187 8.66299 9.65416C8.53346 9.65644 8.4081 9.60836 8.31331 9.52004L6.99998 8.20671L5.68665 9.52004C5.59186 9.60836 5.4665 9.65644 5.33696 9.65416C5.20743 9.65187 5.08384 9.5994 4.99223 9.50779C4.90062 9.41618 4.84815 9.29259 4.84586 9.16305C4.84358 9.03352 4.89166 8.90816 4.97998 8.81337L6.29331 7.50004L4.97998 6.18671C4.88635 6.09296 4.83375 5.96587 4.83375 5.83337C4.83375 5.70087 4.88635 5.57379 4.97998 5.48004Z"
        fill="white"
      />
    </svg>
  ),
  info: (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="12"
      height="15"
      viewBox="0 0 12 15"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0 6.44471C0 4.31271 1.98682e-08 3.24671 0.252 2.88804C0.503333 2.53004 1.50533 2.18671 3.51 1.50071L3.892 1.37004C4.93667 1.01204 5.45867 0.833374 6 0.833374C6.54067 0.833374 7.06333 1.01204 8.108 1.37004L8.49 1.50071C10.4947 2.18671 11.4967 2.53004 11.748 2.88804C12 3.24671 12 4.31337 12 6.44471V7.49404C12 11.2527 9.174 13.0774 7.40067 13.8514C6.92 14.0614 6.68 14.1667 6 14.1667C5.32 14.1667 5.08 14.0614 4.59933 13.8514C2.826 13.0767 0 11.2534 0 7.49404V6.44471ZM6 4.33337C6.13261 4.33337 6.25979 4.38605 6.35355 4.47982C6.44732 4.57359 6.5 4.70077 6.5 4.83337V7.50004C6.5 7.63265 6.44732 7.75983 6.35355 7.85359C6.25979 7.94736 6.13261 8.00004 6 8.00004C5.86739 8.00004 5.74022 7.94736 5.64645 7.85359C5.55268 7.75983 5.5 7.63265 5.5 7.50004V4.83337C5.5 4.70077 5.55268 4.57359 5.64645 4.47982C5.74022 4.38605 5.86739 4.33337 6 4.33337ZM6 10.1667C6.17681 10.1667 6.34638 10.0965 6.4714 9.97144C6.59643 9.84642 6.66667 9.67685 6.66667 9.50004C6.66667 9.32323 6.59643 9.15366 6.4714 9.02864C6.34638 8.90361 6.17681 8.83337 6 8.83337C5.82319 8.83337 5.65362 8.90361 5.5286 9.02864C5.40357 9.15366 5.33333 9.32323 5.33333 9.50004C5.33333 9.67685 5.40357 9.84642 5.5286 9.97144C5.65362 10.0965 5.82319 10.1667 6 10.1667Z"
        fill="white"
      />
    </svg>
  ),
  warning: (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="12"
      height="15"
      viewBox="0 0 12 15"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0 6.44471C0 4.31271 1.98682e-08 3.24671 0.252 2.88804C0.503333 2.53004 1.50533 2.18671 3.51 1.50071L3.892 1.37004C4.93667 1.01204 5.45867 0.833374 6 0.833374C6.54067 0.833374 7.06333 1.01204 8.108 1.37004L8.49 1.50071C10.4947 2.18671 11.4967 2.53004 11.748 2.88804C12 3.24671 12 4.31337 12 6.44471V7.49404C12 11.2527 9.174 13.0774 7.40067 13.8514C6.92 14.0614 6.68 14.1667 6 14.1667C5.32 14.1667 5.08 14.0614 4.59933 13.8514C2.826 13.0767 0 11.2534 0 7.49404V6.44471ZM6 4.33337C6.13261 4.33337 6.25979 4.38605 6.35355 4.47982C6.44732 4.57359 6.5 4.70077 6.5 4.83337V7.50004C6.5 7.63265 6.44732 7.75983 6.35355 7.85359C6.25979 7.94736 6.13261 8.00004 6 8.00004C5.86739 8.00004 5.74022 7.94736 5.64645 7.85359C5.55268 7.75983 5.5 7.63265 5.5 7.50004V4.83337C5.5 4.70077 5.55268 4.57359 5.64645 4.47982C5.74022 4.38605 5.86739 4.33337 6 4.33337ZM6 10.1667C6.17681 10.1667 6.34638 10.0965 6.4714 9.97144C6.59643 9.84642 6.66667 9.67685 6.66667 9.50004C6.66667 9.32323 6.59643 9.15366 6.4714 9.02864C6.34638 8.90361 6.17681 8.83337 6 8.83337C5.82319 8.83337 5.65362 8.90361 5.5286 9.02864C5.40357 9.15366 5.33333 9.32323 5.33333 9.50004C5.33333 9.67685 5.40357 9.84642 5.5286 9.97144C5.65362 10.0965 5.82319 10.1667 6 10.1667Z"
        fill="white"
      />
    </svg>
  ),
};

const ENUM_COLORS = {
  success: "bg-[#0A8100]",
  loading: "bg-[#815500]",
  error: "bg-[#810000]",
  info: "bg-[#810000]",
  warning: "bg-[#815500]",
};

const DEFAULT_DURATION = 3000;
const DEFAULT_POSITION: TPositions = "top-center";

/**
 * Custom Notification
 */
const Notification = ({
  content,
  status,
  duration = DEFAULT_DURATION,
  icon,
  position = DEFAULT_POSITION,
}: TNotificationProps) => {
  return toast.custom(
    (t) => (
      //       font-family: Satoshi;
      // font-size: 14px;
      // font-style: normal;
      // font-weight: 400;
      // line-height: 120%; /* 16.8px */
      <div
        className={`flex flex-row border-solid border-[1px] rounded-none items-center justify-between max-w-sm shadow-center p-4 transform-gpu relative transition-all duration-500 ease-in-out space-x-2
        ${
          position.substring(0, 3) == "top"
            ? `hover:translate-y-1 ${t.visible ? "top-0" : "-top-96"}`
            : `hover:-translate-y-1 ${t.visible ? "bottom-0" : "-bottom-96"}`
        }
        ${ENUM_COLORS[status]}`}
      >
        <div className="text-2xl self-center">
          {icon ? icon : ENUM_STATUSES[status]}
        </div>
        <div className={`break-all whitespace-pre-line ${icon ? "mt-1" : ""}`}>
          <Typography type="meta" className="text-white">
            {content}
          </Typography>
        </div>

        {/* <div
          className={`cursor-pointer text-lg mt-2`}
          onClick={() => toast.dismiss(t.id)}
        >
          <Icon src={Icons.xButton} width={12} height={12} />
        </div> */}
      </div>
    ),
    {
      duration: status === "loading" ? Infinity : duration,
      position,
    }
  );
};

export const notification = {
  success: (content: React.ReactNode, options?: NotificationOptions) => {
    return Notification({ content, status: "success", ...options });
  },
  info: (content: React.ReactNode, options?: NotificationOptions) => {
    return Notification({ content, status: "info", ...options });
  },
  warning: (content: React.ReactNode, options?: NotificationOptions) => {
    return Notification({ content, status: "warning", ...options });
  },
  error: (content: React.ReactNode, options?: NotificationOptions) => {
    return Notification({ content, status: "error", ...options });
  },
  loading: (content: React.ReactNode, options?: NotificationOptions) => {
    return Notification({ content, status: "loading", ...options });
  },
  remove: (toastId: string) => {
    toast.remove(toastId);
  },
};
